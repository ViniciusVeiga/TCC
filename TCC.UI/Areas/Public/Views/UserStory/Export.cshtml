@model ETHistoric

@using TCC.Domain.Entities
@using TCC.BusinessLayer.BusinessLayers

@{
    var projects = BLBase<ETProject>.GetList();
}

<div class="content-header">
    <h1>
        Escolha de Projeto
    </h1>
    <div class="breadcrumb">
        @Ajax.ActionLink("Voltar", "Index", "Content/Index", null, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "Ajax_Update_Menu" }, new { @class = "btn btn-warning" })

        @if (Model?.IdProject != null)
        {
            @Ajax.ActionLink("Continuar", "Page_1", "UserStory", null, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "Ajax_Update_Menu" }, new { @class = "btn btn-primary" })
        }
    </div>
</div>
<div class="content">
    <div class="box">
        <div class="box-header with-border">
            <div class="col-lg-12">
                <div>
                    <h4>Para iniciarmos o tutorial é necessario a escolha de algum projeto para o ensino, ou, se desejar, crie o seu proprio projeto!</h4>
                    <p>Selecione algum projeto abaixo:</p>
                </div>
            </div>
        </div>
        <div class="box-body">
            <div class="board">
                <div class="row" id="Append">
                    @Helpers.MessageBoard()

                    @foreach (var item in projects)
                    {
                        <div class="col-lg-4">
                            <div class="alert postit select @(Model?.IdProject == item.Id ? "active" : string.Empty)">
                                <input type="hidden" name="IdProject" value="@item.Id" />
                                <h4>@item.Title</h4>
                                <p>@item.Text</p>
                            </div>
                        </div>
                    }

                    <div class="bottom-board">
                        @Helpers.SaveButtonBoard()
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button id="cmd">generate PDF</button>
</div>

@PostitHelpers.PostitExampleHTML(classCol: "col-sm-12 col-md-4", addClassPostit: "select")

@section scripts {
    @Html.Partial("_ScriptPage_0")
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script>

    var doc = new jsPDF();
    var specialElementHandlers = {
        '#editor': function (element, renderer) {
            return true;
        }
    };

    $('#cmd').click(function () {
        doc.fromHTML($('#content').html(), 15, 15, {
            'width': 170,
            'elementHandlers': specialElementHandlers
        });
        doc.save('sample-file.pdf');
    });

</script>