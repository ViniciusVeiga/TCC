@model ETHistoric
@using TCC.Domain.Entities

@Scripts.Render("~/Scripts/Postit")

<script type="text/javascript">
    $('#ExportarButton').click(function () {
        var doc = {
            content: [
                {
                    alignment: 'left',
                    text: 'EASY TEST - Especificação do Projeto',
                    style: 'header',
                    fontSize: 17,
                    bold: true,
                    margin: [0, 30, 0, 10],
                },
                {
                    table: {
                        widths: ['100%'],
                        body: [
                            [
                                {
                                    alignment: 'center',
                                    text: '@Model.Project.Title.Replace("\r\n", "").Replace("\n", "").Replace("\r", "")',
                                    fontSize: 9,
                                    bold: true,
                                    fillColor: '#c2dec2', 
                                }
                            ],
                            [
                                {
                                    text: '@Model.Project.Text.Replace("\r\n", "").Replace("\n", "").Replace("\r", "")',
                                    fontSize: 9,
                                    bold: true
                                }
                            ],
                        ],
                    }
                },
                {
                    alignment: 'left',
                    text: 'USER STORIES',
                    style: 'header',
                    fontSize: 13,
                    bold: true,
                    margin: [0, 30, 0, 0],
                },
               @for (int i = 0; i < Model.CardUserStories.Count; i++)
                {
                var card = Model.CardUserStories[i];

                <text>
                    { text: ' ' },
                    {
                        table: {
                            widths: ['100%'],
                            body: [
                                [
                                    {
                                        text: 'USER STORY @i',
                                        fontSize: 9,
                                        bold: true,
                                        alignment: 'center',
                                        fillColor: '#f5f5f5', 
                                    }
                                ],
                               @foreach (var line in card.CardLines)
                                {
                                <text>
                                    [
                                        {
                                            text: '@line.Line.Replace("\r\n", "").Replace("\n", "").Replace("\r", "")',
                                            fontSize: 9,
                                            bold: true
                                        }
                                    ],
                                </text>
                                }

                            ],
                        },
                    },
                </text>             
                },
            ]
        };
        
        createPdf(doc)
            .download('EASY_TEST_Especificação_do_Projeto.pdf');
    });
</script>


