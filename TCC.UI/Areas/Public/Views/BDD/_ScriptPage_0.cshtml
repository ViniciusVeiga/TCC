@model ETHistoric

@using TCC.Domain.Entities

@{
    var urlSave = "Learnboard/BDD/SaveHistoric";
    var page = "Page_0";
}

@Scripts.Render("~/Scripts/Postit")

<script type="text/javascript">

    function start() {
        $('#Example').remove();
    }

    function sendToSave() {
        var result = validationsByJs();

        if (result == true){
            var idProject = $('.postit.active').children('input[name=IdProject]').val();

            @Helpers.JsonToSave(Model, page)

            data.model.Historic.IdProject = idProject;

            $.ajax({
                type: 'POST',
                url: '@urlSave',
                data: data,
                success: function (data) {
                    changeContent(data);
                }
            });
        }
        else
            writeMessage(result);
    }

    function validationsByJs() {
        var countActive = $('.postit.active').length;

        if (countActive == 0)
            return 'Selecione um projeto para salvar!';

        return true;
    }

    $('#Append').on('click', '.postit.select', function () {
        $('.postit').removeClass('active');
        $(this).addClass('active');
    });
</script>